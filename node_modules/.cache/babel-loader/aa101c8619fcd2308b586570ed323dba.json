{"ast":null,"code":"const idb = require('idb');\n\nvar dbPromise = idb.open('companiondb', 1, db => {\n  if (!db.objectStoreNames.contains('users')) {\n    db.createObjectStore('users', {\n      keyPath: 'id'\n    });\n  }\n\n  if (!db.objectStoreNames.contains('session')) {\n    db.createObjectStore('session', {\n      keyPath: 'id'\n    });\n  }\n\n  if (!db.objectStoreNames.contains('actions')) {\n    db.createObjectStore('actions', {\n      keyPath: 'id'\n    });\n  }\n\n  if (!db.objectStoreNames.contains('sync-posts')) {\n    db.createObjectStore('sync-posts', {\n      keyPath: 'id'\n    });\n  }\n});\n\nlet writeData = (st, data) => {\n  return dbPromise.then(function (db) {\n    let tx = db.transaction(st, 'readwrite');\n    let store = tx.objectStore(st);\n    store.put(data);\n    return tx.complete;\n  });\n};\n\nlet readAllData = st => {\n  return dbPromise.then(function (db) {\n    var tx = db.transaction(st, 'readonly');\n    var store = tx.objectStore(st);\n    return store.getAll();\n  });\n};\n\nlet clearAllData = st => {\n  indexedDB.deleteDatabase(st);\n  return dbPromise.then(function (db) {\n    var tx = db.transaction(st, 'readwrite');\n    var store = tx.objectStore(st);\n    store.delete('jwt');\n    store.clear();\n    return tx.complete;\n  });\n};\n\nexport { writeData, clearAllData, readAllData };","map":{"version":3,"sources":["/Users/larainefajardo/Desktop/web_app/_progressive_web_app/react/companion/src/utils/db.js"],"names":["idb","require","dbPromise","open","db","objectStoreNames","contains","createObjectStore","keyPath","writeData","st","data","then","tx","transaction","store","objectStore","put","complete","readAllData","getAll","clearAllData","indexedDB","deleteDatabase","delete","clear"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAnB;;AAEA,IAAIC,SAAS,GAAGF,GAAG,CAACG,IAAJ,CAAS,aAAT,EAAwB,CAAxB,EAA2BC,EAAE,IAAI;AAC7C,MAAI,CAACA,EAAE,CAACC,gBAAH,CAAoBC,QAApB,CAA6B,OAA7B,CAAL,EAA4C;AACxCF,IAAAA,EAAE,CAACG,iBAAH,CAAqB,OAArB,EAA8B;AAACC,MAAAA,OAAO,EAAE;AAAV,KAA9B;AACH;;AACD,MAAI,CAACJ,EAAE,CAACC,gBAAH,CAAoBC,QAApB,CAA6B,SAA7B,CAAL,EAA8C;AAC1CF,IAAAA,EAAE,CAACG,iBAAH,CAAqB,SAArB,EAAgC;AAACC,MAAAA,OAAO,EAAE;AAAV,KAAhC;AACH;;AACD,MAAI,CAACJ,EAAE,CAACC,gBAAH,CAAoBC,QAApB,CAA6B,SAA7B,CAAL,EAA8C;AAC1CF,IAAAA,EAAE,CAACG,iBAAH,CAAqB,SAArB,EAAgC;AAACC,MAAAA,OAAO,EAAE;AAAV,KAAhC;AACH;;AACD,MAAI,CAACJ,EAAE,CAACC,gBAAH,CAAoBC,QAApB,CAA6B,YAA7B,CAAL,EAAiD;AAC7CF,IAAAA,EAAE,CAACG,iBAAH,CAAqB,YAArB,EAAmC;AAACC,MAAAA,OAAO,EAAE;AAAV,KAAnC;AACH;AACJ,CAbe,CAAhB;;AAgBA,IAAIC,SAAS,GAAG,CAACC,EAAD,EAAKC,IAAL,KAAc;AAC1B,SAAOT,SAAS,CAACU,IAAV,CAAe,UAASR,EAAT,EAAa;AAC/B,QAAIS,EAAE,GAAGT,EAAE,CAACU,WAAH,CAAeJ,EAAf,EAAmB,WAAnB,CAAT;AACA,QAAIK,KAAK,GAAGF,EAAE,CAACG,WAAH,CAAeN,EAAf,CAAZ;AACAK,IAAAA,KAAK,CAACE,GAAN,CAAUN,IAAV;AACA,WAAOE,EAAE,CAACK,QAAV;AACH,GALM,CAAP;AAMH,CAPD;;AASA,IAAIC,WAAW,GAAIT,EAAD,IAAQ;AAEtB,SAAOR,SAAS,CAACU,IAAV,CAAe,UAASR,EAAT,EAAa;AAC/B,QAAIS,EAAE,GAAGT,EAAE,CAACU,WAAH,CAAeJ,EAAf,EAAmB,UAAnB,CAAT;AACA,QAAIK,KAAK,GAAGF,EAAE,CAACG,WAAH,CAAeN,EAAf,CAAZ;AACA,WAAOK,KAAK,CAACK,MAAN,EAAP;AACD,GAJI,CAAP;AAKH,CAPD;;AASA,IAAIC,YAAY,GAAIX,EAAD,IAAQ;AACzBY,EAAAA,SAAS,CAACC,cAAV,CAAyBb,EAAzB;AAEE,SAAOR,SAAS,CAACU,IAAV,CAAe,UAASR,EAAT,EAAa;AAC/B,QAAIS,EAAE,GAAGT,EAAE,CAACU,WAAH,CAAeJ,EAAf,EAAmB,WAAnB,CAAT;AACJ,QAAIK,KAAK,GAAGF,EAAE,CAACG,WAAH,CAAeN,EAAf,CAAZ;AACAK,IAAAA,KAAK,CAACS,MAAN,CAAa,KAAb;AACIT,IAAAA,KAAK,CAACU,KAAN;AACA,WAAOZ,EAAE,CAACK,QAAV;AACD,GANI,CAAP;AAOH,CAVD;;AAYA,SAAST,SAAT,EAAoBY,YAApB,EAAkCF,WAAlC","sourcesContent":["const idb = require('idb');\n\nvar dbPromise = idb.open('companiondb', 1, db => {\n    if (!db.objectStoreNames.contains('users')) {\n        db.createObjectStore('users', {keyPath: 'id'});\n    }\n    if (!db.objectStoreNames.contains('session')) {\n        db.createObjectStore('session', {keyPath: 'id'});\n    }\n    if (!db.objectStoreNames.contains('actions')) {\n        db.createObjectStore('actions', {keyPath: 'id'});\n    }\n    if (!db.objectStoreNames.contains('sync-posts')) {\n        db.createObjectStore('sync-posts', {keyPath: 'id'});\n    }\n});\n\n\nlet writeData = (st, data) => {\n    return dbPromise.then(function(db) {\n        let tx = db.transaction(st, 'readwrite');\n        let store = tx.objectStore(st);\n        store.put(data);\n        return tx.complete;\n    });\n}\n\nlet readAllData = (st) => {\n\n    return dbPromise.then(function(db) {\n        var tx = db.transaction(st, 'readonly');\n        var store = tx.objectStore(st);\n        return store.getAll();\n      });\n}\n\nlet clearAllData = (st) => {\n\t\tindexedDB.deleteDatabase(st)\n\n    return dbPromise.then(function(db) {\n        var tx = db.transaction(st, 'readwrite');\n\t\t\t\tvar store = tx.objectStore(st);\n\t\t\t\tstore.delete('jwt');\n        store.clear();\n        return tx.complete;\n      });\n}\n\nexport { writeData, clearAllData, readAllData } ;\n"]},"metadata":{},"sourceType":"module"}